{% extends 'cosmic_base.html' %}
{% load humanize %}
{% block content %}
<div class="form-group pull-left {% if my_order.status == 'Pending' %} pending block-print {% else %} default {% endif %}" style="margin-top: 0;margin-left: 0;background-position-x: center;background-position-y: center;background-repeat: no-repeat;">
    <div style="display: flex;">
        <img src="../static/new_logo.png" alt="" style="width: 150px;text-align: right;">
        <div class="mb-4">
            <div class="text-muted">
                <h3 class="mb-1" style="margin-left: 52px;">Cosmic Connection FZE</h3>
                <p class="mb-1" style="margin-left: 20px; text-align: center;">Free Zone, Djbouti
                    <br>Email: paresh.bavishi@technotransgroup.com <br>TEL.+253-77 81 55 70
                </p>
    
            </div>
            <h4 class="mb-1 text-muted" style="margin-left: 132px;">Proforma Invoice</h4>
    
        </div>
    </div>
    <div class="table-responsive " >
        <table class="table table-nowrap mb-0" style="margin-bottom: 0;margin-left: 0;">
            <thead>
              
                <tr>
                    <th style="width: 400px;">
                        <h4 class="text-muted text-sm-end font-size-15 mb-1">Seller Details</h4>
                        <div class="text-muted">
                            <p class="mb-1" style="line-height: 1.2;font-size: small;">{{my_order.supplier_name.supplier_name}} <br>
                                {{my_order.supplier_name.supplier_address}}</p>

                        </div>
                    </th>
                    <th>
                        <div class="col-sm-5" style="width: 140px;padding: 0;">
                            <div class="text-muted text-sm-end">
                                <div class="mt-4">
                                    <h5 class="font-size-15 mb-1" style="margin: 0;">Order No:</h5>
                                    <p style="margin: 0;font-size: small;">{{my_order.order_no}}</p>
                                </div>
                                <div class="mt-4">
                                    <h5 class="font-size-15 mb-1" style="margin: 0;">Invoice Date:</h5>
                                    <p style="margin: 0;font-size: small;">{{my_order.date}}</p>
                                </div>


                            </div>
                        </div>
                    </th>
                    <th>
                        <div class="text-muted text-sm-end" style="width: 200px;padding: 0;">
                            <div class="mt-4">
                                <h5 class="font-size-15 mb-1" style="margin: 0;">Proforma Invoice No:</h5>
                                <p style="margin: 0;font-size: small;"> {{my_order.order_no}}</p>
                            </div>
                            {%if shipping.customer_no%}
                            <div class="text-muted">
                                <h5 class="font-size-15 mb-1">Customer Ref. no</h5>
                                <p class="mb-1" style="font-size: small;">{{shipping.customer_no}}</p>

                            </div>
                            {%endif%}
                        </div>
                    </th>
                </tr>
            </thead><!-- end thead -->
            <tbody>
                <tr>
                    {% if my_order.order_no%}
                    <th>
                        <h4 class="text-muted text-sm-end font-size-13 mb-1">Buyer Details</h4>
                        <div class="text-muted font-size: small;">
                            <p class="mb-1 font-size-11" style="line-height: 1.2; font-size: small;">{{my_order.customer_name.customer_name}} <br>
                                {{my_order.customer_name.customer_address}}</p>

                        </div>
                    </th>
                    {%else%}
                    <th style="width: 400px;">
                        <h4 class="text-muted text-sm-end font-size-13 mb-1">Notify Party</h4>
                        <div class="text-muted font-size: small;">
                            <p class="mb-1">{{my_order.customer_name.customer_name}}</p>
                            <p class="mb-1">{{my_order.customer_name.customer_name}}</p>

                        </div>
                    </th>
                    {%endif%}
                    <th>
                        <div class="text-muted">
                            <h5 class="font-size-15 mb-1" style="line-height: 0.7;">Port of Loading</h5>
                            <p class="mb-1" style="line-height: 1.2;font-size: small;">Djbouti</p>

                        </div>
                        <div class="text-muted">
                            <h5 class="font-size-15 mb-1" style="line-height: 0.7;">Port Of Discharge</h5>
                            <p class="mb-1" style="line-height: 1.2;font-size: small;">Addis Ababa</p>

                        </div>

                        <div class="text-muted">
                            <h5 class="text-muted text-sm-end font-size-15 mb-1" style="line-height: 0.7;">Means of
                                Transport</h5>
                            <!-- <p class="mb-1">Bole Sub city, Kebele 02,House No. 393/2</p> -->
                            <p class="mb-1" style="font-size: small;line-height: 1.2;">{{my_order.transportation}}</p>
                        </div>
                    </th>
                    <th>
                        <div class="text-muted">
                            <h5 class="font-size-15 mb-1" style="line-height: 0.7;">Payment Terms</h5>
                            <p class="mb-1" style="line-height: 1.2;font-size: small;">{{my_order.payment_type}}</p>

                        </div>
                        {% if my_order.freight%}
                        <div class="text-muted">
                            <h5 class="font-size-15 mb-1" style="line-height: 0.7;">Freight</h5>
                            <p class="mb-1" style="line-height: 1.2;font-size: small;">{{my_order.freight}}</p>

                        </div>
                        {% endif%}
                        <div class="text-muted">
                            <h5 class="text-muted text-sm-end font-size-15 mb-1" style="line-height: 0.7;"> Shipment Terms</h5>
                            <!-- <p class="mb-1">Bole Sub city, Kebele 02,House No. 393/2</p> -->
                            <p class="mb-1" style="font-size: small;line-height: 1.2;">{{my_order.shipment_type}}</p>
                        </div>
                    </th>


                    {% if my_order.freight_amount %}

                    <th scope="row" colspan="4" class="border-0 text-end">
                        Shipping Charge :</th>

                    <td class="border-0 text-end">
                        <p id="shipping_price">${{my_order.freight_amount}}</p>
                    </td>

                    <!-- end tr -->
                <tr>
                    <th scope="row" colspan="4" class="text-end">Sub Total</th>
                    <td class="text-end" id="total_price">${{my_order.PR_total_price|add:my_order.freight_amount }}</td>
                </tr>

                {% else %}

                {% endif %}


                </tr>
                <!-- end tr -->
            </tbody><!-- end tbody -->
        </table><!-- end table -->
    </div>
    <!-- end row -->

    <div class="py-2" style="margin: 0;">
        <h5 class="font-size-15">Order Summary</h5>

        <div class="table-responsive">
            <table class="table align-middle table-nowrap table-centered mb-0" style="margin: 0; padding: 0;border-collapse: collapse;
            border-spacing: 0;">
                <thead>
                    <tr>
                        <th style="width: 70px;">No.</th>
                        <th>Item</th>
                        <th>Price in USD</th>
                        <th>Quantity</th>
                        <th class="text-end" style="width: 120px;">Total</th>
                    </tr>
                </thead><!-- end thead -->
                <tbody>


                    {% if pr_items %}
                    {% for delivery in pr_items %}
                    <tr>
                        <td style="font-weight: bold;">0{{ forloop.counter }}</td>
                        <td>
                            <div>
                                <h5 class="text-truncate font-size-14 mb-1">{{delivery.item_name}}</h5>
                                <p class="text-muted mb-0">HS-code:{{delivery.hs_code}}</p>
                            </div>
                        </td>
                        {% if my_order.country %}
                        <td> ${{delivery.price}}</td>
                        <td>{{delivery.quantity}}</td>
                        <td> ${{delivery.total_price}} </td>
                        {% else %}
                        <td> ${{delivery.price}}</td>
                        <td>{{delivery.quantity}}</td>
                        <td> ${{delivery.before_vat}} </td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                    {% endif %}
                    {% if my_order.freight_price %}
                    <tr>
                        <th scope="row" colspan="4" class="border-0 text-end" style="margin: 0;padding: 0;">
                            Freight :</th>

                        <td class="border-0 text-end" style="margin: 0;padding: 0;">
                            <p id="shipping_price" style="color: black;">${{my_order.freight_price}}</p>
                        </td>
                    </tr>

                    <!-- end tr -->

                    <tr style="margin: 0;line-height: 1;padding: 0;">
                        <th scope="row" colspan="1" class="text-end" style="margin: 0;line-height: 1;padding: 0;">Total
                        </th>
                        <td colspan="3" style="margin: 0;padding: 0;">Amount in Words: USD {{num}} </td>
                        <td class="text-end" id="total_price" style="margin: 0;padding: 0;">
                            ${{number|intcomma }}</td>
                    </tr>

                    {% else %}

                    <!-- end tr -->
                    <tr style="margin: 0;line-height: 1;padding: 0;">
                        <th scope="row" colspan="1" class="text-end" style="margin: 0;line-height: 1;padding: 0;">Total
                        </th>
                        <td colspan="3" >Amount in Words: USD {{num}} </td>
                        <td class="text-end" id="total_price">
                            ${{my_order.PR_before_vat|intcomma }}</td>
                    </tr>
                    {% endif %}

                    </tr>
                    <!-- end tr -->
                </tbody><!-- end tbody -->
            </table><!-- end table -->
        </div><!-- end table responsive -->

        


    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
    integrity="sha384-eMNCOe7tC1doHpGoWe/6oMVemdAVTMs2xqW4mwXrXsW0L84Iytr2wi5v2QjrP/xp"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js"
    integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/"
    crossorigin="anonymous"></script>

    <script>

        document.addEventListener('DOMContentLoaded', function () {
            const totalPrice = document.getElementById('total_price')
            const shippingPriceElement = document.getElementById('shipping_price');
            
    
            var total_price = parseFloat(totalPrice.textContent);
            var shippingPrice = parseFloat(shippingPriceElement.textContent);
            console.log(shippingPrice)
            shippingPrice = shippingPrice.toString()
            var modifiedValue = shippingPrice.replace('$', '');
            console.log(modifiedValue)
            
    
            
    
        })
    
    </script>

{% endblock %}